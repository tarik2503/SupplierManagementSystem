<div class="container my-2">
  <h1 class="mb-3">{{formHeading}}</h1>

  <div class="row justify-content-center">
    <div class="col-lg-12 mt-2">
      <form [formGroup]="addProductForm">
        <div class="row mb-3 ">
          <div class="col-md-8"></div>

          <div
            class="col-md-4 d-flex align-items-center justify-content-between"
          >
            <div class="mt-3 input-group mx-3">
              <span class="bg-dark text-light p-2 mb-0"> Profit: </span>
              <input
                type="number"
                id="profitValue"
                [value]="calculateProfit()"
                disabled
                class="form-control"
              />
            </div>
            <div class="d-flex">
              <button type="submit" (click)="onSave()" class="btn btn-primary">
                Save
              </button>
              <a
                routerLink="/productlist"
                class="btn btn-outline-secondary mx-2"
                >Cancel</a
              >
            </div>
          </div>
        </div>

        <div class="row mb-3 shadow bg-light ">
          <div class="col-md-4 mt-2 ">
            <!-- add image -->

            <div class="mt-2">
              <img alt="" [src]="imageURL" class="product-img-preview" />
            </div>
            <div class="input-group">
              <input
                type="file"
                #file
                id="file"
                class="form-control"
                style="display: none"
                (change)="uploadFile($event)"
              />
              <button
                type="button"
                class="btn btn-success"
                (click)="file.click()"
              >
                Choose Image
              </button>
            </div>
            
            <!-- add image -->
          </div>

          <div class="col-md-8">
            <div class="row">
              <div class="col-md-6 mb-3">
                <label for="title" class="form-label">Title</label>
                <div
                  class="input-field"
                  [class.error]="
                    addProductForm.controls['title'].dirty &&
                    addProductForm.hasError('required', 'title')
                  "
                >
                  <input
                    formControlName="title"
                    type="text"
                    class="form-control custom-input"
                    placeholder="Enter Title"
                  />
                </div>
                <small
                  class="text-danger"
                  *ngIf="
                    addProductForm.controls['title'].dirty &&
                    addProductForm.hasError('required', 'title')
                  "
                  >*Title is required</small
                >
              </div>

              <div class="col-md-6 mb-3">
                <label for="productsku" class="form-label">Product SKU</label>
                <div
                  class="input-field"
                  [class.error]="
                    addProductForm.controls['productSKU'].dirty &&
                    addProductForm.hasError('required', 'productSKU')
                  "
                >
                  <input
                    formControlName="productSKU"
                    type="text"
                    class="form-control custom-input"
                    placeholder="Enter Here"
                  />
                </div>
                <small
                  class="text-danger"
                  *ngIf="
                    addProductForm.controls['productSKU'].dirty &&
                    addProductForm.hasError('required', 'productSKU')
                  "
                  >*Product SKU is required</small
                >
              </div>
            </div>

            <div class="row">
              <div class="col-md-6 mb-3">
                <label for="costprice" class="form-label">Cost Price</label>
                <div
                  class="input-group input-field"
                  [class.error]="
                    addProductForm.controls['costPrice'].dirty &&
                    addProductForm.hasError('required', 'costPrice')
                  "
                >
                  <span class="input-group-text">₹</span>
                  <input
                    formControlName="costPrice"
                    type="number"
                    class="form-control custom-input"
                    placeholder="Enter Price"
                  />
                </div>
                <small
                  class="text-danger"
                  *ngIf="
                    addProductForm.controls['costPrice'].dirty &&
                    addProductForm.hasError('required', 'costPrice')
                  "
                  >*Cost Price is required</small
                >
                <small
                  class="text-danger"
                  *ngIf="
                    addProductForm.controls['costPrice'].dirty &&
                    addProductForm.hasError('min', 'costPrice')
                  "
                  >*Cost Price is required</small
                >
              </div>

              <div class="col-md-6 mb-3">
                <label for="sellingprice" class="form-label"
                  >Selling Price</label
                >
                <div
                  class="input-group input-field"
                  [class.error]="
                    addProductForm.controls['sellingPrice'].dirty &&
                    addProductForm.hasError('required', 'sellingPrice')
                  "
                >
                  <span class="input-group-text">₹</span>
                  <input
                    formControlName="sellingPrice"
                    type="number"
                    class="form-control custom-input"
                    placeholder="Enter Price"
                  />
                </div>
                <small
                  class="text-danger"
                  *ngIf="
                    addProductForm.controls['sellingPrice'].dirty &&
                    addProductForm.hasError('required', 'sellingPrice')
                  "
                  >*Selling Price is required</small
                >
                <small
                  class="text-danger"
                  *ngIf="
                    addProductForm.controls['sellingPrice'].dirty &&
                    addProductForm.hasError('min', 'sellingPrice')
                  "
                  >*Selling Price is required</small
                >
              </div>
            </div>

            <div class="row">
              <div class="col-md-6 mb-3">
                <label for="supplier" class="form-label">Supplier</label>
                <select class="form-select" formControlName="supplierId">
                  <option value="" selected>Select Supplier</option>
                  <option
                    *ngFor="let supplier of suppliers"
                    [value]="supplier.id"
                  >
                    {{ supplier.supplierName }}
                  </option>
                </select>
                <small
                  class="text-danger"
                  *ngIf="
                    addProductForm.controls['supplierId'].dirty &&
                    addProductForm.hasError('required', 'supplierId')
                  "
                  >*Supplier is required</small
                >
              </div>
            </div>
          </div>
        </div>
      </form>
    </div>
  </div>
</div>
